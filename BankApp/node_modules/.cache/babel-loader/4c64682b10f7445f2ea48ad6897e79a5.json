{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React, { Component } from 'react';\nimport { Col, Row, ButtonToolbar, Button, Container } from 'react-bootstrap';\nimport Link from 'next/link';\nimport Header from '../components/header.js';\nimport DashboardSection from '../components/dashboardsection.js';\nimport { withRouter } from 'next/router';\n\nvar Dashboard =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Dashboard, _Component);\n\n  _createClass(Dashboard, null, [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(_ref) {\n        var req, id, res, accountsJson, transJson, billsJson, json, alerts;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                req = _ref.req;\n                // console.log(\"dashboard\")\n                // console.log(req)\n                id = req.user.User_id; // console.log(id)\n\n                _context.next = 4;\n                return fetch(\"https://9d170bae.ngrok.io/Accounts/\".concat(id, \"/secret\"));\n\n              case 4:\n                res = _context.sent;\n                _context.next = 7;\n                return res.json();\n\n              case 7:\n                accountsJson = _context.sent;\n                console.log(accountsJson);\n                _context.next = 11;\n                return fetch(\"https://9d170bae.ngrok.io/Transactions/All/\".concat(id, \"/5/secret\"));\n\n              case 11:\n                res = _context.sent;\n                _context.next = 14;\n                return res.json();\n\n              case 14:\n                transJson = _context.sent;\n                _context.next = 17;\n                return fetch(\"https://9d170bae.ngrok.io/Bills/\".concat(id, \"/secret\"));\n\n              case 17:\n                res = _context.sent;\n                _context.next = 20;\n                return res.json();\n\n              case 20:\n                billsJson = _context.sent;\n                console.log('bills');\n                console.log(billsJson);\n                _context.next = 25;\n                return fetch(\"https://9d170bae.ngrok.io/User/\".concat(id, \"/secret\"));\n\n              case 25:\n                res = _context.sent;\n                _context.next = 28;\n                return res.json();\n\n              case 28:\n                json = _context.sent;\n                _context.next = 31;\n                return fetch('https://9d170bae.ngrok.io/Bills/misses/:${id}/secret');\n\n              case 31:\n                res = _context.sent;\n                _context.next = 34;\n                return res.json();\n\n              case 34:\n                alerts = _context.sent;\n                console.log(\"mainAccount\");\n                console.log(json.main_account_id); // '/Transactions/All/:User_id/:rowAmount/:api_key'\n\n                return _context.abrupt(\"return\", {\n                  accounts: accountsJson,\n                  transactions: transJson,\n                  bills: billsJson,\n                  name: req.user.First_name,\n                  main: json.main_account_id,\n                  id: id,\n                  alerts: alerts\n                });\n\n              case 38:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  function Dashboard(props) {\n    var _this;\n\n    _classCallCheck(this, Dashboard);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Dashboard).call(this, props)); // console.log(\"props\")\n    // console.log(this.props)\n\n    _this.state = {\n      id: _this.props.router.query.id,\n      accounts: _this.props.accounts,\n      transactions: _this.props.transactions,\n      alerts: _this.props.alerts,\n      bills: _this.props.bills\n    };\n    return _this;\n  } //\n  // static async getData(){\n  //   var id = this.props.router\n  //\n  //   const res = await fetch(`https://9d170bae.ngrok.io/Accounts/${id}/secret`)\n  //   const json = await res.json()\n  //   this.setState({test: json})\n  //   console.log(json)\n  // }\n  //\n  //   componentDidMount(){\n  //\n  //       getData()\n  //   }\n\n\n  _createClass(Dashboard, [{\n    key: \"render\",\n    value: function render() {\n      // console.log(\"state\")\n      // console.log(this.state)\n      return React.createElement(Container, null, React.createElement(Header, null), React.createElement(Row, null, React.createElement(Col, null, React.createElement(WelcomeMessage, {\n        name: this.props.name\n      }), React.createElement(DashboardSection, {\n        title: \"Alerts\",\n        values: this.state.alerts\n      }), React.createElement(DashboardSection, {\n        title: \"Accounts\",\n        values: this.state.accounts,\n        transactions: this.state.transactions,\n        main: this.props.main,\n        id: this.props.id\n      }), React.createElement(DashboardSection, {\n        title: \"Bills\",\n        values: this.state.bills,\n        accounts: this.state.accounts\n      }))));\n    }\n  }]);\n\n  return Dashboard;\n}(Component);\n\nvar WelcomeMessage =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(WelcomeMessage, _Component2);\n\n  function WelcomeMessage() {\n    _classCallCheck(this, WelcomeMessage);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(WelcomeMessage).apply(this, arguments));\n  }\n\n  _createClass(WelcomeMessage, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Row, null, React.createElement(Col, null, React.createElement(\"p\", null, \"Welcome, \", this.props.name, \" \")));\n    }\n  }]);\n\n  return WelcomeMessage;\n}(Component);\n\nexport default withRouter(Dashboard);","map":{"version":3,"sources":["/Users/michaelfultonjr./Documents/BankApp/pages/dashboard.js"],"names":["React","Component","Col","Row","ButtonToolbar","Button","Container","Link","Header","DashboardSection","withRouter","Dashboard","req","id","user","User_id","fetch","res","json","accountsJson","console","log","transJson","billsJson","alerts","main_account_id","accounts","transactions","bills","name","First_name","main","props","state","router","query","WelcomeMessage"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {Col, Row, ButtonToolbar, Button, Container} from 'react-bootstrap';\nimport Link from 'next/link';\nimport Header from '../components/header.js';\nimport DashboardSection from '../components/dashboardsection.js'\n import {withRouter} from 'next/router'\n\n\nclass Dashboard extends Component{\n\n\n  static async getInitialProps({req}){\n      // console.log(\"dashboard\")\n      // console.log(req)\n      var id = req.user.User_id\n      // console.log(id)\n      var res = await fetch(`https://9d170bae.ngrok.io/Accounts/${id}/secret`)\n\n      const accountsJson = await res.json()\n  console.log(accountsJson)\n\n\n      res = await fetch(`https://9d170bae.ngrok.io/Transactions/All/${id}/5/secret`)\n\n      const transJson = await res.json()\n\n\n      res = await fetch(`https://9d170bae.ngrok.io/Bills/${id}/secret`)\n\n      const billsJson = await res.json()\n      console.log('bills')\n      console.log(billsJson)\n\n      res = await fetch(`https://9d170bae.ngrok.io/User/${id}/secret`)\n      const json = await res.json()\n\n      res = await fetch('https://9d170bae.ngrok.io/Bills/misses/:${id}/secret')\n\n      const alerts = await res.json()\n      console.log(\"mainAccount\")\n      console.log(json.main_account_id)\n      // '/Transactions/All/:User_id/:rowAmount/:api_key'\n\n      return {accounts: accountsJson, transactions: transJson, bills: billsJson, name: req.user.First_name, main: json.main_account_id, id: id, alerts: alerts}\n  }\n\n\nconstructor(props){\n  super(props)\n  // console.log(\"props\")\n  // console.log(this.props)\n  this.state = {\n    id: this.props.router.query.id,\n    accounts: this.props.accounts,\n    transactions: this.props.transactions,\n    alerts: this.props.alerts,\n    bills:this.props.bills\n\n  }\n}\n//\n// static async getData(){\n//   var id = this.props.router\n//\n//   const res = await fetch(`https://9d170bae.ngrok.io/Accounts/${id}/secret`)\n//   const json = await res.json()\n//   this.setState({test: json})\n//   console.log(json)\n// }\n//\n//   componentDidMount(){\n//\n//       getData()\n//   }\n\n\n  render(){\n    // console.log(\"state\")\n    // console.log(this.state)\n    return (\n\n      <Container>\n        <Header />\n        <Row>\n          <Col>\n            <WelcomeMessage name={this.props.name} />\n\n              <DashboardSection title=\"Alerts\" values={this.state.alerts}/>\n\n\n            <DashboardSection title=\"Accounts\" values={this.state.accounts} transactions={this.state.transactions} main={this.props.main} id={this.props.id} />\n\n\n            <DashboardSection title=\"Bills\" values={this.state.bills}\n              accounts={this.state.accounts}/>\n\n          </Col>\n        </Row>\n      </Container>\n    )\n  }\n}\n\n\nclass WelcomeMessage extends Component {\n\n  render(){\n    return (\n      <Row>\n        <Col>\n        <p>Welcome, {this.props.name} </p>\n        </Col>\n      </Row>\n    )\n  }\n}\n\n\nexport default withRouter(Dashboard)\n"]},"metadata":{},"sourceType":"module"}